http {
    # HTTP context settings
    client_max_body_size 20M;
    
    server {
        # Basic server configuration
        listen 80;
        server_name example.com www.example.com;
        
        # Root directory for this server
        root /var/www/html;
        
        # Default index files
        index index.html index.htm index.php;
        
        # Custom error pages
        error_page 404 /404.html;
        error_page 500 502 503 504 /50x.html;
        
        # Static images with alias
        location /images/ {
            alias /var/www/static/img/;
            autoindex off;
        }
        
        # Downloads directory with autoindex enabled
        location /downloads/ {
            root /var/www;
            autoindex on;
        }
        
        location /api/ {
            allow_methods GET POST;
        }
        
        # Admin area - only GET allowed, restricted IPs
        location /admin/ {
            allow_methods GET;
            root /var/www/secure;
            index admin.html;
        }
        
        # File upload endpoint
        location /upload/ {
            allow_methods PUT POST;
            client_max_body_size 100M;
            upload_store /tmp/uploads;
        }
        
        # CGI scripts handling
        location ~ \.(cgi|pl)$ {
            cgi_path /usr/bin/perl;
            cgi_ext .cgi .pl;
            root /var/www/cgi-bin;
        }
        
        # PHP CGI processing
        location /form {
            cgi_path /usr/bin/php-cgi;
            cgi_ext .php;
            root /var/www/html;
        }
        
        # Redirect old URLs
        location /old-page {
            return 301 /new-page;
        }
        
        # Return custom response
        location /health {
            return 200 "OK\n";
        }
        
        # Error page location
        location = /404.html {
            root /var/www/errors;
        }
        
        location = /50x.html {
            root /var/www/errors;
        }
    }
}